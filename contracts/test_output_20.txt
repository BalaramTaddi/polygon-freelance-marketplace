WARNING: You are currently using Node.js v22.19.0, which is not supported by Hardhat. This can lead to unexpected behavior. See https://hardhat.org/nodejs-versions


[dotenv@17.2.3] injecting env (3) from .env -- tip: ΓÜÖ∩╕Å  enable debug logging with { debug: true }
Warning: Function state mutability can be restricted to pure
  --> contracts/test/Invariants.sol:11:5:
   |
11 |     function echidna_escrow_balance_safety() public view returns (bool) {
   |     ^ (Relevant source part starts here and spans across multiple lines).


Compiled 3 Solidity files successfully (evm target: cancun).


  Ethers Check
Ethers type: object
Ethers keys: [
  'version',
  'decodeBytes32String',
  'encodeBytes32String',
  'AbiCoder',
  'ConstructorFragment',
  'ErrorFragment',
  'EventFragment',
  'Fragment',
  'FallbackFragment',
  'FunctionFragment',
  'NamedFragment',
  'ParamType',
  'StructFragment',
  'checkResultErrors',
  'ErrorDescription',
  'Indexed',
  'Interface',
  'LogDescription',
  'Result',
  'TransactionDescription',
  'Typed',
  'getAddress',
  'getIcapAddress',
  'getCreateAddress',
  'getCreate2Address',
  'isAddressable',
  'isAddress',
  'resolveAddress',
  'ZeroAddress',
  'WeiPerEther',
  'MaxUint256',
  'MinInt256',
  'MaxInt256',
  'N',
  'ZeroHash',
  'EtherSymbol',
  'MessagePrefix',
  'BaseContract',
  'Contract',
  'ContractFactory',
  'ContractEventPayload',
  'ContractTransactionReceipt',
  'ContractTransactionResponse',
  'ContractUnknownEventPayload',
  'EventLog',
  'UndecodedEventLog',
  'computeHmac',
  'randomBytes',
  'keccak256',
  'ripemd160',
  'sha256',
  'sha512',
  'pbkdf2',
  'scrypt',
  'scryptSync',
  'lock',
  'Signature',
  'SigningKey',
  'id',
  'ensNormalize',
  'isValidName',
  'namehash',
  'dnsEncode',
  'hashAuthorization',
  'verifyAuthorization',
  'hashMessage',
  'verifyMessage',
  'solidityPacked',
  'solidityPackedKeccak256',
  'solidityPackedSha256',
  'TypedDataEncoder',
  'verifyTypedData',
  'getDefaultProvider',
  'Block',
  'FeeData',
  'Log',
  'TransactionReceipt',
  'TransactionResponse',
  'AbstractSigner',
  'NonceManager',
  'VoidSigner',
  'AbstractProvider',
  'FallbackProvider',
  'JsonRpcApiProvider',
  'JsonRpcProvider',
  'JsonRpcSigner',
  'BrowserProvider',
  'AlchemyProvider',
  'AnkrProvider',
  'BlockscoutProvider',
  'ChainstackProvider',
  'CloudflareProvider',
  'EtherscanProvider',
  'InfuraProvider',
  'InfuraWebSocketProvider',
  'PocketProvider',
  'QuickNodeProvider',
  'IpcSocketProvider',
  'SocketProvider',
  'WebSocketProvider',
  ... 102 more items
]
Is getSigners defined? function
    Γ£ö Should have getSigners

  Debug HRE keys
HRE keys: [
  'config',
  'hardhatArguments',
  'tasks',
  'scopes',
  'userConfig',
  'version',
  'run',
  'artifacts',
  'network',
  '_environmentExtenders',
  'ethers',
  'ignition',
  'upgrades',
  'defender'
]
HRE.ethers keys: [
  'version',
  'decodeBytes32String',
  'encodeBytes32String',
  'AbiCoder',
  'ConstructorFragment',
  'ErrorFragment',
  'EventFragment',
  'Fragment',
  'FallbackFragment',
  'FunctionFragment',
  'NamedFragment',
  'ParamType',
  'StructFragment',
  'checkResultErrors',
  'ErrorDescription',
  'Indexed',
  'Interface',
  'LogDescription',
  'Result',
  'TransactionDescription',
  'Typed',
  'getAddress',
  'getIcapAddress',
  'getCreateAddress',
  'getCreate2Address',
  'isAddressable',
  'isAddress',
  'resolveAddress',
  'ZeroAddress',
  'WeiPerEther',
  'MaxUint256',
  'MinInt256',
  'MaxInt256',
  'N',
  'ZeroHash',
  'EtherSymbol',
  'MessagePrefix',
  'BaseContract',
  'Contract',
  'ContractFactory',
  'ContractEventPayload',
  'ContractTransactionReceipt',
  'ContractTransactionResponse',
  'ContractUnknownEventPayload',
  'EventLog',
  'UndecodedEventLog',
  'computeHmac',
  'randomBytes',
  'keccak256',
  'ripemd160',
  'sha256',
  'sha512',
  'pbkdf2',
  'scrypt',
  'scryptSync',
  'lock',
  'Signature',
  'SigningKey',
  'id',
  'ensNormalize',
  'isValidName',
  'namehash',
  'dnsEncode',
  'hashAuthorization',
  'verifyAuthorization',
  'hashMessage',
  'verifyMessage',
  'solidityPacked',
  'solidityPackedKeccak256',
  'solidityPackedSha256',
  'TypedDataEncoder',
  'verifyTypedData',
  'getDefaultProvider',
  'Block',
  'FeeData',
  'Log',
  'TransactionReceipt',
  'TransactionResponse',
  'AbstractSigner',
  'NonceManager',
  'VoidSigner',
  'AbstractProvider',
  'FallbackProvider',
  'JsonRpcApiProvider',
  'JsonRpcProvider',
  'JsonRpcSigner',
  'BrowserProvider',
  'AlchemyProvider',
  'AnkrProvider',
  'BlockscoutProvider',
  'ChainstackProvider',
  'CloudflareProvider',
  'EtherscanProvider',
  'InfuraProvider',
  'InfuraWebSocketProvider',
  'PocketProvider',
  'QuickNodeProvider',
  'IpcSocketProvider',
  'SocketProvider',
  'WebSocketProvider',
  ... 102 more items
]
    Γ£ö Should log hre keys

  FreelanceEscrow Verification
    Γ£ö Should initialize correctly and grant roles
    1) Should create a job with milestones and release them
    2) Should deduct platform fees upon full fund release
    Γ£ö Should allow client to reclaim funds after deadline

  FreelanceEscrow Production Features
    Γ£ö Should handle pull-based refunds for unselected freelancers (44ms)
    3) Should verify setVault and role-based access

  PolyToken
    Deployment
      Γ£ö Should set the right owner
      Γ£ö Should assign the total supply of tokens to the owner
      Γ£ö Should have a total supply of 1 billion
    Transactions
      Γ£ö Should transfer tokens between accounts
      Γ£ö Should fail if sender doesn't have enough tokens

  PolyLance Production Suite
    Full Job Lifecycle (ERC20)
      4) Processes a standard job from creation to completion with SBTs and Reputation
      5) Handles Milestone-based Jobs correctly
    Dispute & Arbitration
      6) Arbitrator can resolve dispute with specific bps
    Privacy & Governance
      Γ£ö PrivacyShield: User can commit and admin can verify
      Γ£ö Governance: Users with SBTs can propose and vote (41ms)
    InsurancePool Payouts
      Γ£ö Owner can payout from insurance pool


  13 passing (5s)
  6 failing

  1) FreelanceEscrow Verification
       Should create a job with milestones and release them:
     AssertionError: expected undefined to be true
      at Context.<anonymous> (test\FreelanceEscrow.test.js:66:36)

  2) FreelanceEscrow Verification
       Should deduct platform fees upon full fund release:
     Error: Transaction reverted: non-payable function was called with value 100000000000000000
    at FreelanceEscrow.acceptJob (contracts/FreelanceEscrow.sol:126)
    at <UnrecognizedContract>.<unknown> (0x8a791620dd6260079bf849dc5567adc3f2fdc318)
    at EdrProviderWrapper.request (node_modules\hardhat\src\internal\hardhat-network\provider\provider.ts:415:41)
    at HardhatEthersSigner.sendTransaction (node_modules\@nomicfoundation\hardhat-ethers\src\signers.ts:185:18)
    at send (node_modules\ethers\src.ts\contract\contract.ts:313:20)
    at Proxy.acceptJob (node_modules\ethers\src.ts\contract\contract.ts:352:16)
    at Context.<anonymous> (test\FreelanceEscrow.test.js:85:9)
  

  3) FreelanceEscrow Production Features
       Should verify setVault and role-based access:
     Error: The given contract doesn't have a custom error named 'OwnableUnauthorizedAccount'
      at validateInput (node_modules\@nomicfoundation\hardhat-chai-matchers\src\internal\reverted\revertedWithCustomError.ts:177:13)
      at Proxy.<anonymous> (node_modules\@nomicfoundation\hardhat-chai-matchers\src\internal\reverted\revertedWithCustomError.ts:42:46)
      at Proxy.methodWrapper (node_modules\chai\lib\chai\utils\addMethod.js:57:25)
      at doAsserterAsyncAndAddThen (node_modules\chai-as-promised\lib\chai-as-promised.js:289:22)
      at Proxy.<anonymous> (node_modules\chai-as-promised\lib\chai-as-promised.js:255:20)
      at Proxy.overwritingMethodWrapper (node_modules\chai\lib\chai\utils\overwriteMethod.js:78:33)
      at Context.<anonymous> (test\FreelanceEscrow_Production.test.js:83:17)

  4) PolyLance Production Suite
       Full Job Lifecycle (ERC20)
         Processes a standard job from creation to completion with SBTs and Reputation:
     Error: no matching fragment (operation="fragment", info={ "args": [ "0x0000000000000000000000000000000000000000", "0x95401dc811bb5740090279Ba06cfA8fcF6113778", 1000000000, "ipfs://job", 7, 1 ], "key": "createJob" }, code=UNSUPPORTED_OPERATION, version=6.16.0)
      at makeError (node_modules\ethers\src.ts\utils\errors.ts:698:21)
      at assert (node_modules\ethers\src.ts\utils\errors.ts:719:25)
      at getFragment (node_modules\ethers\src.ts\contract\contract.ts:270:15)
      at Proxy.createJob (node_modules\ethers\src.ts\contract\contract.ts:350:26)
      at Context.<anonymous> (test\Production.test.js:94:42)

  5) PolyLance Production Suite
       Full Job Lifecycle (ERC20)
         Handles Milestone-based Jobs correctly:
     Error: VM Exception while processing transaction: reverted with custom error 'InvalidStatus()'
    at FreelanceEscrow.applyForJob (contracts/FreelanceEscrow.sol:94)
    at <UnrecognizedContract>.<unknown> (0x1fa02b2d6a771842690194cf62d91bdd92bfe28d)
    at EdrProviderWrapper.request (node_modules\hardhat\src\internal\hardhat-network\provider\provider.ts:415:41)
    at HardhatEthersSigner.sendTransaction (node_modules\@nomicfoundation\hardhat-ethers\src\signers.ts:185:18)
    at send (node_modules\ethers\src.ts\contract\contract.ts:313:20)
    at Proxy.acceptJob (node_modules\ethers\src.ts\contract\contract.ts:352:16)
    at Context.<anonymous> (test\Production.test.js:126:13)
  

  6) PolyLance Production Suite
       Dispute & Arbitration
         Arbitrator can resolve dispute with specific bps:
     Error: no matching fragment (operation="fragment", info={ "args": [ "0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC", "0x4EE6eCAD1c2Dae9f525404De8555724e3c35d07B", 1000000000, "ipfs://j", 7, 1 ], "key": "createJob" }, code=UNSUPPORTED_OPERATION, version=6.16.0)
      at makeError (node_modules\ethers\src.ts\utils\errors.ts:698:21)
      at assert (node_modules\ethers\src.ts\utils\errors.ts:719:25)
      at getFragment (node_modules\ethers\src.ts\contract\contract.ts:270:15)
      at Proxy.createJob (node_modules\ethers\src.ts\contract\contract.ts:350:26)
      at Context.<anonymous> (test\Production.test.js:146:42)



