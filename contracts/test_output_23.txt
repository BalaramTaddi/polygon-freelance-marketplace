WARNING: You are currently using Node.js v22.19.0, which is not supported by Hardhat. This can lead to unexpected behavior. See https://hardhat.org/nodejs-versions


[dotenv@17.2.3] injecting env (3) from .env -- tip: Γ£à audit secrets and track compliance: https://dotenvx.com/ops
Warning: Unused function parameter. Remove or comment out the variable name to silence this warning.
  --> contracts/PrivacyShield.sol:52:9:
   |
52 |         uint256 threshold
   |         ^^^^^^^^^^^^^^^^^


Warning: Function state mutability can be restricted to pure
  --> contracts/test/Invariants.sol:11:5:
   |
11 |     function echidna_escrow_balance_safety() public view returns (bool) {
   |     ^ (Relevant source part starts here and spans across multiple lines).


Compiled 109 Solidity files successfully (evm target: cancun).


  Ethers Check
Ethers type: object
Ethers keys: [
  'version',
  'decodeBytes32String',
  'encodeBytes32String',
  'AbiCoder',
  'ConstructorFragment',
  'ErrorFragment',
  'EventFragment',
  'Fragment',
  'FallbackFragment',
  'FunctionFragment',
  'NamedFragment',
  'ParamType',
  'StructFragment',
  'checkResultErrors',
  'ErrorDescription',
  'Indexed',
  'Interface',
  'LogDescription',
  'Result',
  'TransactionDescription',
  'Typed',
  'getAddress',
  'getIcapAddress',
  'getCreateAddress',
  'getCreate2Address',
  'isAddressable',
  'isAddress',
  'resolveAddress',
  'ZeroAddress',
  'WeiPerEther',
  'MaxUint256',
  'MinInt256',
  'MaxInt256',
  'N',
  'ZeroHash',
  'EtherSymbol',
  'MessagePrefix',
  'BaseContract',
  'Contract',
  'ContractFactory',
  'ContractEventPayload',
  'ContractTransactionReceipt',
  'ContractTransactionResponse',
  'ContractUnknownEventPayload',
  'EventLog',
  'UndecodedEventLog',
  'computeHmac',
  'randomBytes',
  'keccak256',
  'ripemd160',
  'sha256',
  'sha512',
  'pbkdf2',
  'scrypt',
  'scryptSync',
  'lock',
  'Signature',
  'SigningKey',
  'id',
  'ensNormalize',
  'isValidName',
  'namehash',
  'dnsEncode',
  'hashAuthorization',
  'verifyAuthorization',
  'hashMessage',
  'verifyMessage',
  'solidityPacked',
  'solidityPackedKeccak256',
  'solidityPackedSha256',
  'TypedDataEncoder',
  'verifyTypedData',
  'getDefaultProvider',
  'Block',
  'FeeData',
  'Log',
  'TransactionReceipt',
  'TransactionResponse',
  'AbstractSigner',
  'NonceManager',
  'VoidSigner',
  'AbstractProvider',
  'FallbackProvider',
  'JsonRpcApiProvider',
  'JsonRpcProvider',
  'JsonRpcSigner',
  'BrowserProvider',
  'AlchemyProvider',
  'AnkrProvider',
  'BlockscoutProvider',
  'ChainstackProvider',
  'CloudflareProvider',
  'EtherscanProvider',
  'InfuraProvider',
  'InfuraWebSocketProvider',
  'PocketProvider',
  'QuickNodeProvider',
  'IpcSocketProvider',
  'SocketProvider',
  'WebSocketProvider',
  ... 102 more items
]
Is getSigners defined? function
    Γ£ö Should have getSigners

  Debug HRE keys
HRE keys: [
  'config',
  'hardhatArguments',
  'tasks',
  'scopes',
  'userConfig',
  'version',
  'run',
  'artifacts',
  'network',
  '_environmentExtenders',
  'ethers',
  'ignition',
  'upgrades',
  'defender'
]
HRE.ethers keys: [
  'version',
  'decodeBytes32String',
  'encodeBytes32String',
  'AbiCoder',
  'ConstructorFragment',
  'ErrorFragment',
  'EventFragment',
  'Fragment',
  'FallbackFragment',
  'FunctionFragment',
  'NamedFragment',
  'ParamType',
  'StructFragment',
  'checkResultErrors',
  'ErrorDescription',
  'Indexed',
  'Interface',
  'LogDescription',
  'Result',
  'TransactionDescription',
  'Typed',
  'getAddress',
  'getIcapAddress',
  'getCreateAddress',
  'getCreate2Address',
  'isAddressable',
  'isAddress',
  'resolveAddress',
  'ZeroAddress',
  'WeiPerEther',
  'MaxUint256',
  'MinInt256',
  'MaxInt256',
  'N',
  'ZeroHash',
  'EtherSymbol',
  'MessagePrefix',
  'BaseContract',
  'Contract',
  'ContractFactory',
  'ContractEventPayload',
  'ContractTransactionReceipt',
  'ContractTransactionResponse',
  'ContractUnknownEventPayload',
  'EventLog',
  'UndecodedEventLog',
  'computeHmac',
  'randomBytes',
  'keccak256',
  'ripemd160',
  'sha256',
  'sha512',
  'pbkdf2',
  'scrypt',
  'scryptSync',
  'lock',
  'Signature',
  'SigningKey',
  'id',
  'ensNormalize',
  'isValidName',
  'namehash',
  'dnsEncode',
  'hashAuthorization',
  'verifyAuthorization',
  'hashMessage',
  'verifyMessage',
  'solidityPacked',
  'solidityPackedKeccak256',
  'solidityPackedSha256',
  'TypedDataEncoder',
  'verifyTypedData',
  'getDefaultProvider',
  'Block',
  'FeeData',
  'Log',
  'TransactionReceipt',
  'TransactionResponse',
  'AbstractSigner',
  'NonceManager',
  'VoidSigner',
  'AbstractProvider',
  'FallbackProvider',
  'JsonRpcApiProvider',
  'JsonRpcProvider',
  'JsonRpcSigner',
  'BrowserProvider',
  'AlchemyProvider',
  'AnkrProvider',
  'BlockscoutProvider',
  'ChainstackProvider',
  'CloudflareProvider',
  'EtherscanProvider',
  'InfuraProvider',
  'InfuraWebSocketProvider',
  'PocketProvider',
  'QuickNodeProvider',
  'IpcSocketProvider',
  'SocketProvider',
  'WebSocketProvider',
  ... 102 more items
]
    Γ£ö Should log hre keys

  FreelanceEscrow Verification
    Γ£ö Should initialize correctly and grant roles
    Γ£ö Should create a job with milestones and release them
    1) Should deduct platform fees upon full fund release
    2) Should allow client to reclaim funds after deadline

  FreelanceEscrow Production Features
    3) Should handle pull-based refunds for unselected freelancers
    Γ£ö Should verify setVault and role-based access (91ms)

  PolyToken
    Deployment
      Γ£ö Should set the right owner
      Γ£ö Should assign the total supply of tokens to the owner
      Γ£ö Should have a total supply of 1 billion
    Transactions
      Γ£ö Should transfer tokens between accounts
      Γ£ö Should fail if sender doesn't have enough tokens

  PolyLance Production Suite
    Full Job Lifecycle (ERC20)
      Γ£ö Processes a standard job from creation to completion with SBTs and Reputation (61ms)
      Γ£ö Handles Milestone-based Jobs correctly (38ms)
    Dispute & Arbitration
      4) Arbitrator can resolve dispute with specific bps
    Privacy & Governance
      Γ£ö PrivacyShield: User can commit and admin can verify
      Γ£ö Governance: Users with SBTs can propose and vote (42ms)
    InsurancePool Payouts
      Γ£ö Owner can payout from insurance pool


  15 passing (4s)
  4 failing

  1) FreelanceEscrow Verification
       Should deduct platform fees upon full fund release:
     TypeError: invalid BigNumberish value (argument="value", value={ "value": 1000000000000000000 }, code=INVALID_ARGUMENT, version=6.16.0)
      at makeError (node_modules\ethers\src.ts\utils\errors.ts:691:21)
      at assert (node_modules\ethers\src.ts\utils\errors.ts:719:25)
      at assertArgument (node_modules\ethers\src.ts\utils\errors.ts:731:5)
      at getBigInt (node_modules\ethers\src.ts\utils\maths.ts:113:19)
      at NumberCoder.encode (node_modules\ethers\src.ts\abi\coders\number.ts:36:30)
      at C:\Users\akhil\.gemini\antigravity\scratch\polygon-freelance-marketplace\contracts\node_modules\ethers\src.ts\abi\coders\array.ts:64:19
      at Array.forEach (<anonymous>)
      at pack (node_modules\ethers\src.ts\abi\coders\array.ts:47:12)
      at TupleCoder.encode (node_modules\ethers\src.ts\abi\coders\tuple.ts:62:20)
      at AbiCoder.encode (node_modules\ethers\src.ts\abi\abi-coder.ts:195:15)

  2) FreelanceEscrow Verification
       Should allow client to reclaim funds after deadline:
     TypeError: invalid BigNumberish value (argument="value", value={ "value": 1000000000000000000 }, code=INVALID_ARGUMENT, version=6.16.0)
      at makeError (node_modules\ethers\src.ts\utils\errors.ts:691:21)
      at assert (node_modules\ethers\src.ts\utils\errors.ts:719:25)
      at assertArgument (node_modules\ethers\src.ts\utils\errors.ts:731:5)
      at getBigInt (node_modules\ethers\src.ts\utils\maths.ts:113:19)
      at NumberCoder.encode (node_modules\ethers\src.ts\abi\coders\number.ts:36:30)
      at C:\Users\akhil\.gemini\antigravity\scratch\polygon-freelance-marketplace\contracts\node_modules\ethers\src.ts\abi\coders\array.ts:64:19
      at Array.forEach (<anonymous>)
      at pack (node_modules\ethers\src.ts\abi\coders\array.ts:47:12)
      at TupleCoder.encode (node_modules\ethers\src.ts\abi\coders\tuple.ts:62:20)
      at AbiCoder.encode (node_modules\ethers\src.ts\abi\abi-coder.ts:195:15)

  3) FreelanceEscrow Production Features
       Should handle pull-based refunds for unselected freelancers:
     Error: no matching fragment (operation="fragment", info={ "args": [ "0x0000000000000000000000000000000000000000", "0x0DCd1Bf9A1b36cE34237eEaFef220932846BCD82", 10000000000000000000, "ipfs://description", 0 ], "key": "createJob" }, code=UNSUPPORTED_OPERATION, version=6.16.0)
      at makeError (node_modules\ethers\src.ts\utils\errors.ts:698:21)
      at assert (node_modules\ethers\src.ts\utils\errors.ts:719:25)
      at getFragment (node_modules\ethers\src.ts\contract\contract.ts:270:15)
      at Proxy.createJob (node_modules\ethers\src.ts\contract\contract.ts:350:26)
      at Context.<anonymous> (test\FreelanceEscrow_Production.test.js:50:38)

  4) PolyLance Production Suite
       Dispute & Arbitration
         Arbitrator can resolve dispute with specific bps:
     Error: Transaction reverted without a reason string
    at FreelanceEscrow.dispute (contracts/FreelanceEscrow.sol:353)
    at <UnrecognizedContract>.<unknown> (0xc9a43158891282a2b1475592d5719c001986aaec)
    at EdrProviderWrapper.request (node_modules\hardhat\src\internal\hardhat-network\provider\provider.ts:415:41)
    at HardhatEthersSigner.sendTransaction (node_modules\@nomicfoundation\hardhat-ethers\src\signers.ts:185:18)
    at send (node_modules\ethers\src.ts\contract\contract.ts:313:20)
    at Proxy.dispute (node_modules\ethers\src.ts\contract\contract.ts:352:16)
    at Context.<anonymous> (test\Production.test.js:148:13)
  



