WARNING: You are currently using Node.js v22.19.0, which is not supported by Hardhat. This can lead to unexpected behavior. See https://hardhat.org/nodejs-versions


[dotenv@17.2.3] injecting env (3) from .env -- tip: ≡ƒöä add secrets lifecycle management: https://dotenvx.com/ops


  Zenith Protocol: Deep Compliance & Edge Case Suite
    DoS Prevention & Scale Limits
      1) Enforces MAX_APPLICATIONS_PER_JOB (50) to prevent gas exhaustion
    Access Control & Security Shield
      2) Reverts when non-admin tries to change critical settings
      Γ£ö Only manager can whitelist tokens
    Invalid State Transitions
      3) Reverts if applying for a non-existent job
      Γ£ö Reverts if picking a freelancer for a job that already has one
    Financial Integriy & Pull-pattern
      4) Prevents double-counting released funds in milestones
      Γ£ö Refunds client correctly if job is cancelled
    Reputation & Reward Logic
      5) Grants 3x rewards to Supreme members


  3 passing (4s)
  5 failing

  1) Zenith Protocol: Deep Compliance & Edge Case Suite
       DoS Prevention & Scale Limits
         Enforces MAX_APPLICATIONS_PER_JOB (50) to prevent gas exhaustion:
     Error: VM Exception while processing transaction: reverted with custom error 'ERC20InsufficientAllowance("0xa513E6E4b8f2a923D98304ec87F64353C4D5C853", 0, 50000000)'
    at MockERC20._spendAllowance (@openzeppelin/contracts/token/ERC20/ERC20.sol:298)
    at FreelanceEscrow._callOptionalReturn (@openzeppelin/contracts/token/ERC20/utils/SafeERC20.sol:176)
    at FreelanceEscrow.safeTransferFrom (@openzeppelin/contracts/token/ERC20/utils/SafeERC20.sol:42)
    at FreelanceEscrow.applyForJob (contracts/FreelanceEscrow.sol:124)
    at <UnrecognizedContract>.<unknown> (0xa513e6e4b8f2a923d98304ec87f64353c4d5c853)
    at EdrProviderWrapper.request (node_modules\hardhat\src\internal\hardhat-network\provider\provider.ts:415:41)
    at HardhatEthersSigner.sendTransaction (node_modules\@nomicfoundation\hardhat-ethers\src\signers.ts:185:18)
    at send (node_modules\ethers\src.ts\contract\contract.ts:313:20)
    at Proxy.applyForJob (node_modules\ethers\src.ts\contract\contract.ts:352:16)
    at Context.<anonymous> (test\Zenith_Compliance.test.js:66:17)
  

  2) Zenith Protocol: Deep Compliance & Edge Case Suite
       Access Control & Security Shield
         Reverts when non-admin tries to change critical settings:
     AssertionError: Expected transaction to be reverted with custom error 'AccessControlUnauthorizedAccount', but it reverted with custom error 'OwnableUnauthorizedAccount'
      at Context.<anonymous> (test\Zenith_Compliance.test.js:80:13)

  3) Zenith Protocol: Deep Compliance & Edge Case Suite
       Invalid State Transitions
         Reverts if applying for a non-existent job:
     AssertionError: Expected transaction to be reverted
      at Context.<anonymous> (test\Zenith_Compliance.test.js:95:13)

  4) Zenith Protocol: Deep Compliance & Edge Case Suite
       Financial Integriy & Pull-pattern
         Prevents double-counting released funds in milestones:
     AssertionError: Expected transaction to be reverted with custom error 'MilestoneAlreadyReleased', but it reverted with custom error 'InvalidMilestone'
      at Context.<anonymous> (test\Zenith_Compliance.test.js:133:13)

  5) Zenith Protocol: Deep Compliance & Edge Case Suite
       Reputation & Reward Logic
         Grants 3x rewards to Supreme members:

      AssertionError: expected 0 to equal 300000000000000000000.
      + expected - actual

      -0
      +300000000000000000000
      
      at Context.<anonymous> (test\Zenith_Compliance.test.js:185:70)



